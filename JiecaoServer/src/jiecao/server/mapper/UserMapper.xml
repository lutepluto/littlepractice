<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="jiecao.server.mapper.UserMapper">

	<cache />
	
	<select id="getUserBySnsIdAndType" resultType="jiecao.server.domain.User">
		SELECT * FROM user WHERE sns_id = #{sns_id} AND sns_type = #{sns_type}
	</select>
	
	<insert id="insertUser" parameterType="jiecao.server.domain.User" 
		useGeneratedKeys="true" keyProperty="uid">
		INSERT INTO user (sid,sns_id,nickname,description,profile_image_url,gender,user_type,
		sns_type) values (#{sid},#{sns_id},#{nickname}, #{description},#{profile_image_url},
		#{gender},#{user_type},#{sns_type})
	</insert>
	
	<update id="updateUserSid" parameterType="jiecao.server.domain.User">
		UPDATE user set
			sid = #{sid}
		WHERE uid = #{uid}
	</update>
	
	<select id="getUserBySid" parameterType="String" resultType="jiecao.server.domain.User">
		SELECT * FROM user WHERE sid = #{sid}
	</select>
	
	<select id="getUserByUid" parameterType="int" resultType="jiecao.server.domain.User">
		SELECT * FROM user WHERE uid = #{uid}
	</select>
</mapper>